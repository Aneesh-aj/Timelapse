<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="/style.css" class="style">
  <title>product-managment</title>
</head>

<body>
  <nav class="navbar navbar-expand-lg nav-height ">  <!--nav-height  -->
    <div class="container-fluid ">
      <div class=" nav-div1">
       
         <div class="ms-5">
           <span class="">
             <a class="nav-link active nav-texts" aria-current="page" href="/home">Home</a>
          </span>
        </div>
      </div>
     <div class=" d-flex  nav-div2 ">
             
              <div class=" span-div  d-flex  justify-content-center">
                  <span><a class="nav-link nav-texts" href="#">Top</a></span>
              </div>
              <div class="span-div d-flex  justify-content-center ">
                  <span><a class="nav-link nav-texts" href="/collection?gender=kids">Kids</a></span>
              </div>
              <div class="span-div d-flex  justify-content-center ">
                   <span><a class="nav-link nav-texts" href="/collection?gender=men">Mens</a></span>
              </div>
              <div class=" span-div d-flex  justify-content-center ">
                   <span><a  class="nav-link nav-texts" href="/collection?gender=women">Women</a></span>
              </div>
              <div class="span-div d-flex justify-content-center ">
                  <span><a class="nav-link nav-texts" href="/collection?collection=true">collection</a></span>
              </div>
      </div>
      <div class=" d-flex  nav-div3  justify-content-end ">
           <a href="/admin/logout" class="btn btn-outline-light">logout</a>
    
       </div>
     
       <div class=" d-flex pe-4 nav-div4 justify-content-start">
    
            <div class="span-div d-flex justify-content-center ">
                
                <div class="selector-image" style="background-image: url(shopping-cart\ \(1\).png); "></div>
            </div>
       </div>
     </div>
   </nav>
  <content>
    <div class="container-fluid   " id="body-color">
      <div class=" d-flex h-auto  profile-main">
        <div class="profile-div ">
          <div class="profile-photo d-flex align-items-center ">
            <div class=" hii d-flex justify-content-center align-items-center">
              <div class="profile-picture "
                style="background-image: url(https://cdn-icons-png.flaticon.com/128/3001/3001764.png); background-repeat: no-repeat; background-size: cover;">
              </div>
            </div>
            <div class=" hello d-flex align-items-center">
              <span><a href="/admin" style="text-decoration: none; outline: none; color: black;">Admin</a></span>
            </div>
          </div>
          <div class="profile-selection">
            <div class="selector  d-flex align-items-center">
              <div class=" hii d-flex align-items-center justify-content-center">
                <div class="selector-image"
                  style="background-image: url(https://cdn-icons-png.flaticon.com/128/8089/8089114.png); "></div>
              </div>
              <div class="hello d-flex align-items-center">
                <span><a href="/admin/order-details" style="text-decoration: none; outline: none; color: black;">order
                    details</a></span>
              </div>
            </div>
            <div class="line"></div>
            <div class="selector  d-flex align-items-center" style="background-color: rgb(238, 236, 236);">
              <div class=" hii  d-flex align-items-center justify-content-center">
                <div class="selector-image"
                  style="background-image: url(https://cdn-icons-png.flaticon.com/128/4379/4379608.png); "></div>
              </div>
              <div class=" hello d-flex align-items-center">
                <span><a href="/admin/product-managment"
                    style="text-decoration: none; outline: none; color: black;">product</a></span>
              </div>
            </div>
            <div class="line"></div>
            <div class="selector  d-flex align-items-center align-items-center">
              <div class="hii d-flex justify-content-center align-items-center">
                <div class="selector-image bg-light"
                  style="background-image: url(https://cdn-icons-png.flaticon.com/128/2435/2435281.png); "></div>
              </div>
              <div class="hello d-flex align-items-center">
                <span><a href="/admin/user-managment"
                    style="text-decoration: none; outline: none; color: black;">users</a></span>
              </div>
            </div>
            <div class="line"></div>
            <div class="selector  d-flex align-items-center align-items-center">
              <div class="hii d-flex justify-content-center align-items-center">
                <div class="selector-image bg-light"
                  style="background-image: url(https://cdn-icons-png.flaticon.com/128/2435/2435281.png); "></div>
              </div>
              <div class="hello d-flex align-items-center">
                <span><a href="/admin/category"
                    style="text-decoration: none; outline: none; color: black;">category</a></span>
              </div>
            </div>
            <div class="line"></div>
            <div class="selector  d-flex align-items-center align-items-center">
              <div class="hii d-flex justify-content-center align-items-center">
                <div class="selector-image bg-light"
                  style="background-image: url(https://cdn-icons-png.flaticon.com/128/2435/2435281.png); "></div>
              </div>
              <div class="hello d-flex align-items-center">
                <span><a href="/admin/coupon"
                    style="text-decoration: none; outline: none; color: black;">coupon</a></span>
              </div>
            </div>
            <div class="line"></div>

          </div>
        </div>
        <div class="profile-div2 h-auto mb-3 ">
          <div class="table-1  d-flex justify-content-around  ">
            <form class="d-flex  search-1" role="search" action="/admin/product-managment" method="get">
              <input class="form-control me-2 search " id="user-search" type="search" name="searchvalue" placeholder="Search"
                aria-label="Search">
              <button class="btn btn-outline-light flex-column justify-content-center" id="user-searchbtn"
                type="submit"><span class="d-flex align-text-topb">search</span></button>
            </form>
            <a href="/admin/product-managment/add-product" class="btn ms-3 btn-outline-light flex-column justify-content-center" id="user-searchbtn">
              
                add product
            
            </a>
            
           


          </div>
          <div class="table-2 p-4">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th scope="col">product</th>
                  <th scope="col">product name</th>
                  <th scope="col">category</th>
                  <th scope="col">Gender</th>
                  <th scope="col">Brand</th>
                  <th scope="col">price</th>
                  <th scope="col">Stock</th>
                  <th scope="col">Edit</th>
                  <th scope="col">show</th>


                </tr>
              </thead>
              <tbody>
                <% for(let i=0; i < product.length ; i++){ %>
                  <tr>
                    <th scope="row">
                      <div class="bg-primary product-image" >
                           <img src="/filename/<%= product[i].product_image[0]%>" style="height: 100%; width: 100%;">
                      </div>
                    </th>
                    <td class=" pt-4" name="'product_name" value="">
                      <%= product[i].product_name %>
                    </td>
                    <td class=" pt-4" name="category" value="">
                      <%= product[i].watch_type ? product[i].watch_type.watch_type : ''%>
                    </td>
                    <td class=" pt-4" name="gender" value="">
                      <%= product[i].gender %>
                    </td>
                    <td class=" pt-4" name="brand" value="">
                      <%= product[i].brand ? product[i].brand.brand_category:'' %>
                    </td>
                    <td class=" pt-4" name="price" value="">
                      <%= product[i].price %>
                    </td>
                    <td class=" pt-4" name="price" value="">
                         <%= product[i].stock%>
                    </td>
                    <td class=" pt-4"> 
                      <a href="/admin/product-managment/edit/<%= product[i]._id %>" class="btn btn-outline-primary">
                        Edit
                      </a>
                      
                    </td>
                      <!-- Inside the table body -->
                      <td class="pt-4 ">
                          <div class="form-check form-switch ps-5">
                            <input class="form-check-input" type="checkbox" id="listSwitch<%= product[i]._id %>"
                                       <%= product[i].list ? 'checked' : '' %>
                               data-product-id="<%= product[i]._id %>">
                           <label class="form-check-label" for="listSwitch<%= product[i]._id %>">
                                 <%= product[i].list ? 'List' : 'Unlist' %>
                           </label>
                         </div>
                      </td>

                  </tr>
                  <% } %>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>



  </content>
  <!-- Button trigger modal -->

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <form method="post" action="/admin/product-managment/category">
          <div class="modal-body">
            <label for="input">Enter the input</label>
            <input name="" id="input" required >
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Save changes</button>
         </div>
        </form>
      </div>
    </div>
  </div>
  
  <footer>
    <div class="container-fluid footer-color">
      <div class="container d-flex ">
        <div class="">
          <div class="footer-div1 d-flex justify-content-center">
            <h1 class="heading  pt-4">About us</h1>
          </div>
          <div class="footer-div1">

            <p class="p-2">Welcome to Watch Universe, your ultimate destination for exquisite timepieces. At Watch
              Universe, we're passionate about bringing you the finest selection of watches that blend elegance,
              precision, and style.Our journey started with a love for craftsmanship and a desire to share the world's
              most stunning watches with watch enthusiasts and collectors alike.</p>

          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid footer-color d-flex justify-content-center">
      <p class="p-5">&copy; 2023 All rights reserved.Desined by Aneesh</p>
    </div>
  </footer>

</body>
   
<script>
  // Add an event listener for the checkbox click event
  document.addEventListener('DOMContentLoaded', function () {
    const checkboxes = document.querySelectorAll('[id^="listSwitch"]');
    checkboxes.forEach(function (checkbox) {
      checkbox.addEventListener('click', function () {
        const productId = checkbox.id.replace('listSwitch', '');
        const isListed = checkbox.checked;



        const checkboxes = document.querySelectorAll('.form-check-input');
  checkboxes.forEach(function (checkbox) {
    checkbox.addEventListener('change', function () {
      const productId = checkbox.getAttribute('data-product-id');
      const label = document.querySelector(`label[for="listSwitch${productId}"]`);
      label.textContent = checkbox.checked ? 'List' : 'Unlist';
    });
  });

        // Send an AJAX request to update the product's isListed status
        fetch(`/admin/product-managment/list/${productId}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ isListed }),
        })
          .then((response) => response.json())
          .then((data) => {
            // Handle the response data, e.g., show a success message
            console.log('Product listing status updated:', data);

            // Update the label text based on the new listing status
            const label = document.querySelector(`#listLabel${productId}`);
            label.textContent = isListed ? 'List' : 'Unlist';
          })
          .catch((error) => {
            // Handle errors, e.g., display an error message
            console.error('Error updating product status:', error);
          });
      });
    });
  });
</script>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
  integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
  integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</html>